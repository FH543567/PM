<div class="signin-content">
  <mat-card>
    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <p>New Backlog Item</p>
        <mat-input-container class="full-width-input">
          <mat-select placeholder="Type" formControlName="type">
            <mat-option value="option" (click)="setType('Task')">Task</mat-option>
            <mat-option value="option" (click)="setType('Story')">Story</mat-option>
            <mat-option value="option" (click)="setType('Epic')">Epic</mat-option>
          </mat-select>
        </mat-input-container>

        <mat-input-container class="full-width-input">
          <input matInput placeholder="Name"
                 formControlName="name">
          <mat-error *ngIf="isFieldInvalid('name')">
            Please enter a valid name.
          </mat-error>
        </mat-input-container>

        <mat-input-container class="full-width-input">
          <input matInput placeholder="Description"
                 formControlName="description">
          <mat-error *ngIf="isFieldInvalid('description')">
            Please enter a description.
          </mat-error>
        </mat-input-container>

        <mat-input-container class="full-width-input">
          <mat-select placeholder="Priority" formControlName="priority">
            <mat-option [value]="1" (click)="setPriority(1)">1</mat-option>
            <mat-option [value]="2" (click)="setPriority(2)">2</mat-option>
            <mat-option [value]="3" (click)="setPriority(3)">3</mat-option>
          </mat-select>
        </mat-input-container>

        <mat-input-container class="full-width-input" *ngIf="type==='Task'">
          <mat-select placeholder="Person in charge" formControlName="userId">
            <mat-option [value]="user" *ngFor="let user of users">{{user?.firstname}} {{user?.lastname}}</mat-option>
          </mat-select>
        </mat-input-container>

                <!--
        <form [formGroup]="formTask" (ngSubmit)="onSubmit()">

        </form> -->

        <mat-input-container class="full-width-input" *ngIf="type==='Task'">
          <mat-select placeholder="Assigned Story" formControlName="storyId">
            <mat-option [value]="story" *ngFor="let story of stories">{{story?.name}}</mat-option>
          </mat-select>
        </mat-input-container>

        <mat-input-container class="full-width-input" *ngIf="type==='Story'">
          <mat-select placeholder="Assigned Epic" formControlName="epicId">
            <mat-option [value]="epic" *ngFor="let epic of epics">{{epic?.name}}</mat-option>
          </mat-select>
        </mat-input-container>

        <mat-input-container class="full-width-input" *ngIf="type==='Task'">
          <input matInput #input type="number" placeholder="Workload in h"
                 formControlName="workload">
          <mat-error *ngIf="isFieldInvalid('workload')">
            Please enter the workload.
          </mat-error>
        </mat-input-container>

        <button mat-raised-button color="primary" type="submit">Submit</button><span class="spacer"></span>
      </form>
    </mat-card-content>
  </mat-card>
</div>
<!-- routerLink="/backlog"
<div class="example-container">
  <mat-form-field>
    <input matInput placeholder="Name">
  </mat-form-field>

  <mat-form-field>
    <mat-select placeholder="Type">
      <mat-option value="option" (click)="setType('Task')">Task</mat-option>
      <mat-option value="option" (click)="setType('Story')">Story</mat-option>
      <mat-option value="option" (click)="setType('Epic')">Epic</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field>
    <input matInput #input type="number" placeholder="Estimation in h">
  </mat-form-field>

  <mat-form-field>
    <textarea matInput placeholder="Description"></textarea>
  </mat-form-field>

  <mat-form-field>
    <mat-select placeholder="Priority">
      <mat-option value="option" (click)="setPriority(1)">1</mat-option>
      <mat-option value="option" (click)="setPriority(2)">2</mat-option>
      <mat-option value="option" (click)="setPriority(3)">3</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field>
    <mat-select placeholder="Person in charge">
      <mat-option value="option" *ngFor="let user of users">{{user.firstname}} {{user.lastname}}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field>
    <mat-select placeholder="Assigned Story">
      <mat-option value="option" *ngFor="let story of stories">{{story.name}}</mat-option>
    </mat-select>
  </mat-form-field>
</div>
<button mat-raised-button color="primary" (click)="createBacklog()" routerLink="/backlog">Submit</button>
<p *ngFor="let backlog of backlogs">{{backlog.name}}</p>
-->
